<!DOCTYPE html>
<html>

<head>
    <title>Gamification Effects</title>
</head>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<style>
    body {
        background-color: grey;

    }

    button {
        padding: 15px 25px;
        font-size: 24px;
        text-align: center;
        cursor: pointer;
        outline: none;
        color: #fff;
        background-color: #4e3db1;
        border: none;
        border-radius: 15px;
        box-shadow: 1px 9px #34277e;
    }

    button:hover {
        background-color: #4e3db1
    }

    button:active {
        background-color: #4e3db1;
        box-shadow: 0 5px #34277e;
        transform: translateY(4px);
    }

    .center {
        display: block;
        margin: auto;
        position: absolute;
        top: 50%;
        left: 50%;
    }

    .nuvem {
        position: absolute;
        background-color: red;
        top: 0px;
        left: 0px;
    }

    .background {
        position: absolute;
        top: 5px;
        background-color: grey;
        width: 100%;
        height: 500px;
        display: block;
        z-index: -200;
    }

    .buttonTest {
        transform: translateX(200px);
    }

    #myCanvas {
        display: block;
        position: absolute;
        left: 0px;
        top: 0px;
        pointer-events: none;
    }

    .hiden {
        display: none;
        z-index: -500;
    }

    .cloud-effect {
        background-image: url(./imgs/cloud.png);
        display: block;
        width: 200px;
        height: 200px;

        background-size: 100px 100px;
        background-repeat: no-repeat;
        background-position: center;
        image-rendering: pixelated;
        animation-duration: 1.5s;
        animation-name: puffflowUp;
        animation-iteration-count: 1;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        position: absolute;

        border: white;
        border-width: 1px;
        border-style: solid;
    }
</style>

<body>
    <form>
        <button class="" type="button" onclick="InstantiateScoreThatFlowsUp(event, 150)">Get Points</button>
    </form>
    <canvas id="puffCanvas" width="500" height="500" style="border: 1px solid white;">TesteDeCAnvas</canvas>
    <img id="scream" src="http://localhost:8080/imgs/cloud.png" alt="The Scream" width="220" height="277">
    <img id="scream2" src="http://localhost:8080/imgs/img_the_scream.jpg" alt="The Scream" width="220" height="277">
    <img id="scream3" src="https://www.w3schools.com/html/img_the_scream.jpg" alt="The Scream" width="220" height="277">
</body>
<script>
    function teste() {
        var canvas = document.getElementById("puffCanvas");
        var context = canvas.getContext("2d");
        var img2 = new Image();
        img2.src = 'http://localhost:8080/imgs/cloud.png';
        //  context.drawImage(img2, 100, 100, 100, 100);


        var gameObjects = [];

        var puffObj = Instantiate(img2, 100, 100, 100, 100, null);

        function Instantiate(img, positionX, positionY, width, height, component) {

            var gameObject = {
                img: img,
                transform: {
                    position: {
                        x: positionX,
                        y: positionY
                    },
                    scale: {
                        x: width,
                        y: height
                    }
                },
                behaviourComponentScript: component
            }

            gameObjects.push(gameObject);

            return gameObject;
        }

        function updateAllGameObjects() {
            context.clearRect(0, 0, canvas.width, canvas.height);
            for (i = 0; i < gameObjects.length; i++) {
                var obj = gameObjects[i];
                if (obj.behaviourComponentScript != null)
                    behaviourComponentScript();

                context.drawImage(obj.img, obj.transform.position.x, obj.transform.position.y, obj.transform.scale.x, obj.transform.scale.y);
            }
        }

        setInterval(() => {
            puffObj.transform.position.x+=1;
            updateAllGameObjects();
        }, 16);
    }

    setTimeout(teste, 1000);
</script>
<script>

</script>

</html>